!function(){"use strict";var T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t,e){return t(e={exports:{}},e.exports),e.exports}var r="object"==typeof T&&T&&T.Object===Object&&T,e="object"==typeof self&&self&&self.Object===Object&&self,a=r||e||Function("return this")(),i=a.Symbol;var n=function(t,e){for(var i=-1,n=null==t?0:t.length,o=Array(n);++i<n;)o[i]=e(t[i],i,t);return o},h=Array.isArray,o=Object.prototype,s=o.hasOwnProperty,c=o.toString,l=i?i.toStringTag:void 0;var u=function(t){var e=s.call(t,l),i=t[l];try{var n=!(t[l]=void 0)}catch(t){}var o=c.call(t);return n&&(e?t[l]=i:delete t[l]),o},d=Object.prototype.toString;var p=function(t){return d.call(t)},m=i?i.toStringTag:void 0;var f=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":m&&m in Object(t)?u(t):p(t)};var g=function(t){return null!=t&&"object"==typeof t};var y=function(t){return"symbol"==typeof t||g(t)&&"[object Symbol]"==f(t)},v=1/0,_=i?i.prototype:void 0,b=_?_.toString:void 0;var w=function t(e){if("string"==typeof e)return e;if(h(e))return n(e,t)+"";if(y(e))return b?b.call(e):"";var i=e+"";return"0"==i&&1/e==-v?"-0":i};var k=function(t){return null==t?"":w(t)};var I=function(t,e,i){var n=-1,o=t.length;e<0&&(e=o<-e?0:o+e),(i=o<i?o:i)<0&&(i+=o),o=i<e?0:i-e>>>0,e>>>=0;for(var s=Array(o);++n<o;)s[n]=t[n+e];return s};var C=function(t,e,i){var n=t.length;return i=void 0===i?n:i,!e&&n<=i?t:I(t,e,i)},E=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var x=function(t){return E.test(t)};var O=function(t){return t.split("")},A="\\ud800-\\udfff",S="["+A+"]",L="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",M="\\ud83c[\\udffb-\\udfff]",j="[^"+A+"]",B="(?:\\ud83c[\\udde6-\\uddff]){2}",N="[\\ud800-\\udbff][\\udc00-\\udfff]",F="(?:"+L+"|"+M+")"+"?",R="[\\ufe0e\\ufe0f]?",P=R+F+("(?:\\u200d(?:"+[j,B,N].join("|")+")"+R+F+")*"),z="(?:"+[j+L+"?",L,B,N,S].join("|")+")",H=RegExp(M+"(?="+M+")|"+z+P,"g");var U=function(t){return t.match(H)||[]};var D=function(t){return x(t)?U(t):O(t)};var V=function(o){return function(t){t=k(t);var e=x(t)?D(t):void 0,i=e?e[0]:t.charAt(0),n=e?C(e,1).join(""):t.slice(1);return i[o]()+n}}("toUpperCase");function W(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];X[t]&&X[t].forEach(function(t){return t.apply({},e)})}var G=function(t){return V(k(t).toLowerCase())},q=t(function(M,j){!function(t){var e=j&&!j.nodeType&&j,i=M&&!M.nodeType&&M,n="object"==typeof T&&T;n.global!==n&&n.window!==n&&n.self!==n||(t=n);var o,s,y=2147483647,v=36,_=1,b=26,r=38,a=700,w=72,k=128,I="-",c=/^xn--/,l=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=v-_,C=Math.floor,E=String.fromCharCode;function x(t){throw new RangeError(u[t])}function p(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function m(t,e){var i=t.split("@"),n="";return 1<i.length&&(n=i[0]+"@",t=i[1]),n+p((t=t.replace(h,".")).split("."),e).join(".")}function O(t){for(var e,i,n=[],o=0,s=t.length;o<s;)55296<=(e=t.charCodeAt(o++))&&e<=56319&&o<s?56320==(64512&(i=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),o--):n.push(e);return n}function A(t){return p(t,function(t){var e="";return 65535<t&&(e+=E((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=E(t)}).join("")}function S(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function L(t,e,i){var n=0;for(t=i?C(t/a):t>>1,t+=C(t/e);d*b>>1<t;n+=v)t=C(t/d);return C(n+(d+1)*t/(t+r))}function f(t){var e,i,n,o,s,r,a,c,l,h,u,d=[],p=t.length,m=0,f=k,g=w;for((i=t.lastIndexOf(I))<0&&(i=0),n=0;n<i;++n)128<=t.charCodeAt(n)&&x("not-basic"),d.push(t.charCodeAt(n));for(o=0<i?i+1:0;o<p;){for(s=m,r=1,a=v;p<=o&&x("invalid-input"),u=t.charCodeAt(o++),(v<=(c=u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:v)||c>C((y-m)/r))&&x("overflow"),m+=c*r,!(c<(l=a<=g?_:g+b<=a?b:a-g));a+=v)r>C(y/(h=v-l))&&x("overflow"),r*=h;g=L(m-s,e=d.length+1,0==s),C(m/e)>y-f&&x("overflow"),f+=C(m/e),m%=e,d.splice(m++,0,f)}return A(d)}function g(t){var e,i,n,o,s,r,a,c,l,h,u,d,p,m,f,g=[];for(d=(t=O(t)).length,e=k,s=w,r=i=0;r<d;++r)(u=t[r])<128&&g.push(E(u));for(n=o=g.length,o&&g.push(I);n<d;){for(a=y,r=0;r<d;++r)e<=(u=t[r])&&u<a&&(a=u);for(a-e>C((y-i)/(p=n+1))&&x("overflow"),i+=(a-e)*p,e=a,r=0;r<d;++r)if((u=t[r])<e&&++i>y&&x("overflow"),u==e){for(c=i,l=v;!(c<(h=l<=s?_:s+b<=l?b:l-s));l+=v)f=c-h,m=v-h,g.push(E(S(h+f%m,0))),c=C(f/m);g.push(E(S(c,0))),s=L(i,p,n==o),i=0,++n}++i,++e}return g.join("")}if(o={version:"1.4.1",ucs2:{decode:O,encode:A},decode:f,encode:g,toASCII:function(t){return m(t,function(t){return l.test(t)?"xn--"+g(t):t})},toUnicode:function(t){return m(t,function(t){return c.test(t)?f(t.slice(4).toLowerCase()):t})}},e&&i)if(M.exports==e)i.exports=o;else for(s in o)o.hasOwnProperty(s)&&(e[s]=o[s]);else t.punycode=o}(T)}),X={};function K(t,e){for(var i=[],n=arguments.length-2;0<n--;)i[n]=arguments[n+2];var o=t("livechat"),s=t("keyactions");if(!J&&-1<$.indexOf(e))Y.push(arguments);else switch(e){case"onChatShow":case"onChatHide":case"onChatMessage":case"onChatBoot":case"onChatShutdown":case"onButtonClick":(function(t,e){X[t]||(X[t]=[]),X[t].push(e)}).apply(null,[e].concat(i));break;case"runChatShutdown":o&&o.shutdown();break;case"runChatShow":o&&o.show();break;case"runChatHide":o&&o.hide();break;case"sendKeyActionHook":s&&s.reachHook(i[0])}}var J=!1,Y=[],$=["runChatShutdown","runChatShow","runChatHide","sendKeyActionHook"];function Z(t){var e,i;window.amoSocialButton=(e=t,void 0===(i=(window.amoSocialButton||{}).q)&&(i=[]),i.forEach(function(t){return K.apply(null,[e].concat(Array.prototype.slice.apply(t)))}),i.slice(0,0),K.bind(null,e))}var Q=Object.prototype;var tt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Q)};var et=function(e,i){return function(t){return e(i(t))}}(Object.keys,Object),it=Object.prototype.hasOwnProperty;var nt=function(t){if(!tt(t))return et(t);var e=[];for(var i in Object(t))it.call(t,i)&&"constructor"!=i&&e.push(i);return e};var ot=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var st,rt=function(t){if(!ot(t))return!1;var e=f(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},at=a["__core-js_shared__"],ct=(st=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||""))?"Symbol(src)_1."+st:"";var lt=function(t){return!!ct&&ct in t},ht=Function.prototype.toString;var ut=function(t){if(null!=t){try{return ht.call(t)}catch(t){}try{return t+""}catch(t){}}return""},dt=/^\[object .+?Constructor\]$/,pt=Function.prototype,mt=Object.prototype,ft=pt.toString,gt=mt.hasOwnProperty,yt=RegExp("^"+ft.call(gt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var vt=function(t){return!(!ot(t)||lt(t))&&(rt(t)?yt:dt).test(ut(t))};var _t=function(t,e){return null==t?void 0:t[e]};var bt=function(t,e){var i=_t(t,e);return vt(i)?i:void 0},wt=bt(a,"DataView"),kt=bt(a,"Map"),It=bt(a,"Promise"),Ct=bt(a,"Set"),Et=bt(a,"WeakMap"),xt="[object Map]",Ot="[object Promise]",At="[object Set]",St="[object WeakMap]",Lt="[object DataView]",Mt=ut(wt),jt=ut(kt),Tt=ut(It),Bt=ut(Ct),Nt=ut(Et),Ft=f;(wt&&Ft(new wt(new ArrayBuffer(1)))!=Lt||kt&&Ft(new kt)!=xt||It&&Ft(It.resolve())!=Ot||Ct&&Ft(new Ct)!=At||Et&&Ft(new Et)!=St)&&(Ft=function(t){var e=f(t),i="[object Object]"==e?t.constructor:void 0,n=i?ut(i):"";if(n)switch(n){case Mt:return Lt;case jt:return xt;case Tt:return Ot;case Bt:return At;case Nt:return St}return e});var Rt=Ft;var Pt=function(t){return g(t)&&"[object Arguments]"==f(t)},zt=Object.prototype,Ht=zt.hasOwnProperty,Ut=zt.propertyIsEnumerable,Dt=Pt(function(){return arguments}())?Pt:function(t){return g(t)&&Ht.call(t,"callee")&&!Ut.call(t,"callee")};var Vt=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991};var Wt=function(t){return null!=t&&Vt(t.length)&&!rt(t)};function Gt(){return!1}var qt=t(function(t,e){var i=e&&!e.nodeType&&e,n=i&&t&&!t.nodeType&&t,o=n&&n.exports===i?a.Buffer:void 0,s=(o?o.isBuffer:void 0)||Gt;t.exports=s}),Xt={};Xt["[object Float32Array]"]=Xt["[object Float64Array]"]=Xt["[object Int8Array]"]=Xt["[object Int16Array]"]=Xt["[object Int32Array]"]=Xt["[object Uint8Array]"]=Xt["[object Uint8ClampedArray]"]=Xt["[object Uint16Array]"]=Xt["[object Uint32Array]"]=!0,Xt["[object Arguments]"]=Xt["[object Array]"]=Xt["[object ArrayBuffer]"]=Xt["[object Boolean]"]=Xt["[object DataView]"]=Xt["[object Date]"]=Xt["[object Error]"]=Xt["[object Function]"]=Xt["[object Map]"]=Xt["[object Number]"]=Xt["[object Object]"]=Xt["[object RegExp]"]=Xt["[object Set]"]=Xt["[object String]"]=Xt["[object WeakMap]"]=!1;function Kt(t){return g(t)&&Vt(t.length)&&!!Xt[f(t)]}var Jt=function(e){return function(t){return e(t)}},Yt=t(function(t,e){var i=e&&!e.nodeType&&e,n=i&&t&&!t.nodeType&&t,o=n&&n.exports===i&&r.process,s=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=s}),$t=Yt&&Yt.isTypedArray,Zt=$t?Jt($t):Kt,Qt=Object.prototype.hasOwnProperty;var te=function(t){if(null==t)return!0;if(Wt(t)&&(h(t)||"string"==typeof t||"function"==typeof t.splice||qt(t)||Zt(t)||Dt(t)))return!t.length;var e=Rt(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(tt(t))return!nt(t).length;for(var i in t)if(Qt.call(t,i))return!1;return!0};function ee(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}var ie=function(c){return function(t,e,i){for(var n=-1,o=Object(t),s=i(t),r=s.length;r--;){var a=s[c?r:++n];if(!1===e(o[a],a,o))break}return t}}();var ne=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n},oe=/^(?:0|[1-9]\d*)$/;var se=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&oe.test(t))&&-1<t&&t%1==0&&t<e},re=Object.prototype.hasOwnProperty;var ae=function(t,e){var i=h(t),n=!i&&Dt(t),o=!i&&!n&&qt(t),s=!i&&!n&&!o&&Zt(t),r=i||n||o||s,a=r?ne(t.length,String):[],c=a.length;for(var l in t)!e&&!re.call(t,l)||r&&("length"==l||o&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||se(l,c))||a.push(l);return a};var ce=function(t){return Wt(t)?ae(t):nt(t)};var le=function(s,r){return function(t,e){if(null==t)return t;if(!Wt(t))return s(t,e);for(var i=t.length,n=r?i:-1,o=Object(t);(r?n--:++n<i)&&!1!==e(o[n],n,o););return t}}(function(t,e){return t&&ie(t,e,ce)});function he(t){return t}var ue=function(t){return"function"==typeof t?t:he};function de(t,e){var i=Number.parseFloat(t.style.right);i&&t.style.setProperty("right",i+e+"px")}function pe(t){ye=window.innerWidth-document.documentElement.clientWidth,ve=document.body.style.getPropertyValue("overflow"),document.body.style.setProperty("overflow","hidden"),ye&&(document.documentElement.style.setProperty("margin-right",ye+"px"),ge(t,function(t){de(t,ye)}))}function me(t){ve?(document.body.style.setProperty("overflow",ve),ve=null):document.body.style.removeProperty("overflow"),ye&&(document.documentElement.style.removeProperty("margin-right"),ge(t,function(t){de(t,-ye)}))}function fe(t){var e=t.button_holder,i=t.amoforms_url;this.button_holder=e,this.amoforms_url=i,this.is_loading=!1,this.waiting_to_show={},this.handleWindowMessageBound=this.handleWindowMessage.bind(this)}var ge=function(t,e){return(h(t)?ee:le)(t,ue(e))},ye=0,ve=null;fe.prototype.show=function(t){var e=t.id,i=t.hash;if(this.is_loading)this.waiting={id:e,hash:i};else{void 0!==window.amo_forms_params&&(this.buffer_amo_forms_params=Object.assign({},window.amo_forms_params)),this.hide(),window.amo_forms_params={id:e,hash:i,locale:"ru"},window.addEventListener("message",this.handleWindowMessageBound),this.modal=document.createElement("div"),this.script=document.createElement("script");var n=document.createElement("div"),o=document.createElement("span");this.modal.style="\n      position: fixed;\n      z-index: 2147483647;\n      background: rgba(0,0,0,.4);\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom:0;\n      opacity: 0;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n      -ms-flex-align: center;\n      align-items: center;\n      -webkit-box-pack: center;\n      -ms-flex-pack: center;\n      justify-content: center;\n      overflow: auto;\n    ",this.modal.addEventListener("click",this.hide.bind(this)),n.style="\n      position: relative;\n      margin: auto;\n      width: calc(100% - 90px);\n      padding-top: 40px;\n    ",n.addEventListener("click",function(t){return t.stopPropagation()}),o.style="\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n      -ms-flex-align: center;\n      align-items: center;\n      -webkit-box-pack: center;\n      -ms-flex-pack: center;\n      justify-content: center;\n      position: absolute;\n      top: 0;\n      left: 100%;\n      height: 60px;\n      width: 43px;\n      background: none;\n      border: none;\n      padding: 0;\n      cursor: pointer;\n    ",o.innerHTML='\n      <svg width="15" height="16" viewBox="0 0 15 16" xmlns="http://www.w3.org/2000/svg">\n        <path fill="#fff" fill-rule="evenodd" clip-rule="evenodd" d="M7.49998 9.63673L1.97906 15.1577C1.52604 15.6107 0.791253 15.6127 0.339281 15.1607C-0.115843 14.7056 -0.111341 13.9746 0.342318 13.5209L5.86324 8L0.342318 2.47906C-0.110696 2.02604 -0.112692 1.29124 0.339281 0.839272C0.794404 0.384148 1.5254 0.388668 1.97906 0.842327L7.49998 6.36326L13.0209 0.842327C13.474 0.389313 14.2087 0.387299 14.6607 0.839272C15.1158 1.2944 15.1113 2.0254 14.6577 2.47906L9.13672 8L14.6577 13.5209C15.1107 13.974 15.1127 14.7088 14.6607 15.1607C14.2056 15.6159 13.4746 15.6113 13.0209 15.1577L7.49998 9.63673Z" />\n      </svg>\n    ',o.addEventListener("click",this.hide.bind(this)),this.script.id="amoforms_script",this.script.src=this.amoforms_url,n.appendChild(this.script),n.appendChild(o),this.modal.appendChild(n),document.body.appendChild(this.modal),pe([this.button_holder]),this.is_loading=!0}},fe.prototype.hide=function(){this.modal&&(this.modal&&this.modal.parentNode.removeChild(this.modal),this.script&&this.script.parentNode.removeChild(this.script),window.removeEventListener("message",this.handleWindowMessageBound),void 0!==this.buffer_amo_forms_params?(window.amo_forms_params=Object.assign({},this.buffer_amo_forms_params),delete this.buffer_amo_forms_params):delete window.amo_forms_params,me([this.button_holder]),this.modal=null)},fe.prototype.handleWindowMessage=function(t){var e=this,i=null;try{i=JSON.parse(t.data)}catch(t){i=null}if(i&&ot(i))switch(i.func){case"resizeForm":var n=document.getElementById(i.iframe_id);setTimeout(function(){if(e.is_loading=!1,!te(e.waiting))return e.show(e.waiting),void(e.waiting={});n.style.position="relative",i.max_width&&(n.parentNode.style.maxWidth=i.max_width+"px"),e.modal.style.opacity=1});break;case"amoformsSuccessSubmit":setTimeout(function(){return e.hide()},1e3)}};var _e=function(e,t){return n(t,function(t){return e[t]})};function be(t){t=t||21;for(var e="",i=Ie.getRandomValues(new Uint8Array(t));t--;)e+="QLUint8ARdomValuesObj0h6345-79BCrypgJzHKTNYDSMkXPZ_FfG1WcqvwxEI2"[63&i[t]];return e}var we=function(t){return null==t?[]:_e(t,ce(t))},ke=t(function(t,e){var i;i=function(){function a(){for(var t=arguments,e=0,i={};e<arguments.length;e++){var n=t[e];for(var o in n)i[o]=n[o]}return i}function l(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(c){function r(){}function i(t,e,i){if("undefined"!=typeof document){"number"==typeof(i=a({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var n=JSON.stringify(e);/^[\{\[]/.test(n)&&(e=n)}catch(t){}e=c.write?c.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o="";for(var s in i)i[s]&&(o+="; "+s,!0!==i[s]&&(o+="="+i[s].split(";")[0]));return document.cookie=t+"="+e+o}}function e(t,e){if("undefined"!=typeof document){for(var i={},n=document.cookie?document.cookie.split("; "):[],o=0;o<n.length;o++){var s=n[o].split("="),r=s.slice(1).join("=");e||'"'!==r.charAt(0)||(r=r.slice(1,-1));try{var a=l(s[0]);if(r=(c.read||c)(r,a)||l(r),e)try{r=JSON.parse(r)}catch(t){}if(i[a]=r,t===a)break}catch(t){}}return t?i[t]:i}}return r.set=i,r.get=function(t){return e(t,!1)},r.getJSON=function(t){return e(t,!0)},r.remove=function(t,e){i(t,"",a(e,{expires:-1}))},r.defaults={},r.withConverter=t,r}(function(){})},t.exports=i()}),Ie=self.crypto||self.msCrypto,Ce=function(){return a.Date.now()},Ee=/^\s+|\s+$/g,xe=/^[-+]0x[0-9a-f]+$/i,Oe=/^0b[01]+$/i,Ae=/^0o[0-7]+$/i,Se=parseInt;var Le=function(t){if("number"==typeof t)return t;if(y(t))return NaN;if(ot(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ot(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ee,"");var i=Oe.test(t);return i||Ae.test(t)?Se(t.slice(2),i?2:8):xe.test(t)?NaN:+t},Me=Math.max,je=Math.min;function Te(t,e){var i=this,n=parseFloat(sessionStorage.getItem("amo_social_button_tracking_time"))||0;if(this.scrollParams={scrolled_unit:t.scrolled_unit,scrolled_value:parseInt(t.scrolled_value)},t&&"Y"===t.enabled&&t.message){var o=parseInt(t.frequency);this.onShow=e.bind(this),this.displayGreeting=this.displayGreeting.bind(this),this.displayGreetingOnScrollListener=this.displayGreetingOnScrollListener.bind(this);var s=1e3*t.timeout;if(s=n<s?s-n:s,2!==o||"true"!==sessionStorage.getItem(Ne))if(3!==o)switch(this.scrollParams.scrolled_value&&this.afterScrollGreeting(),!0){case this.pageCompare(t):case this.hitsCompare(t):this.displayGreeting();break;default:this.timeout=setTimeout(function(){return i.displayGreeting()},s)}else this.checkFrequencyDay()}}var Be=function(n,o,t){var s,r,a,c,l,h,u=0,d=!1,p=!1,e=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function m(t){var e=s,i=r;return s=r=void 0,u=t,c=n.apply(i,e)}function f(t){var e=t-h;return void 0===h||o<=e||e<0||p&&a<=t-u}function g(){var t,e,i=Ce();if(f(i))return y(i);l=setTimeout(g,(e=o-((t=i)-h),p?je(e,a-(t-u)):e))}function y(t){return l=void 0,e&&s?m(t):(s=r=void 0,c)}function i(){var t,e=Ce(),i=f(e);if(s=arguments,r=this,h=e,i){if(void 0===l)return u=t=h,l=setTimeout(g,o),d?m(t):c;if(p)return clearTimeout(l),l=setTimeout(g,o),m(h)}return void 0===l&&(l=setTimeout(g,o)),c}return o=Le(o)||0,ot(t)&&(d=!!t.leading,a=(p="maxWait"in t)?Me(Le(t.maxWait)||0,o):a,e="trailing"in t?!!t.trailing:e),i.cancel=function(){void 0!==l&&clearTimeout(l),s=h=r=l=void(u=0)},i.flush=function(){return void 0===l?c:y(Ce())},i},Ne="amo_social_button_banner_shown_at";Te.prototype.destroy=function(){this.scrollParams.scrolled_value&&window.removeEventListener("scroll",this.debouncedDisplayGreetingOnScrollListener),clearTimeout(this.timeout)},Te.prototype.displayGreetingOnScrollListener=function(){var t=this.scrollParams,e=t.scrolled_unit,i=t.scrolled_value,n=window.innerHeight*(window.innerHeight/document.documentElement.scrollHeight),o=n+("%"===e?document.documentElement.scrollHeight*i/100:i);window.pageYOffset+n>=o&&(this.scrollParams.is_scroll="N",this.displayGreeting())},Te.prototype.afterScrollGreeting=function(){this.debouncedDisplayGreetingOnScrollListener=Be(this.displayGreetingOnScrollListener,100),window.addEventListener("scroll",this.debouncedDisplayGreetingOnScrollListener),this.displayGreetingOnScrollListener()},Te.prototype.checkFrequencyDay=function(){var t=this,e=(parseInt(localStorage.getItem(Ne))||0)+864e5;if(Date.now()<e){var i=e-Date.now();i/1e3<900&&(this.timeout=setTimeout(function(){return t.checkFrequencyDay()},i))}else this.displayGreeting()},Te.prototype.pageCompare=function(t){var e=window.location.pathname,i=t.page||{value:"",mask:1};return this.compareWithMask(e,i.value,i.mask)},Te.prototype.compareWithMask=function(t,e,i){var n=!1;switch(t=t.toString(),e=e.toString(),parseInt(i)){case 1:n=t===e;break;case 2:n=t!==e;break;case 3:n=t.startsWith(e);break;case 4:n=t.endsWith(e);break;case 5:n=t.includes(e);break;case 6:n=!t.includes(e)}return n},Te.prototype.hitsCompare=function(t){var e=parseInt(sessionStorage.getItem("amo_social_button_tracking_hits"))||0,i=parseInt(t.hits)||0;return 0!==e&&0!==i&&i<=e},Te.prototype.displayGreeting=function(){this.onShow(),localStorage.setItem(Ne,Date.now().toString()),sessionStorage.setItem(Ne,"true"),this.destroy()};function Fe(){var t=ke.get(We);return t||(t=be(),ke.set(We,t,{expires:365})),t}function Re(t){void 0===t&&(t={}),this.props=t;var e=this.props.config,i=0<=["widget","frame"].indexOf(e.mode)?e.mode:"widget";this.chatContainer=null,"frame"===e.mode&&e.container&&document.querySelector(e.container)&&(i="frame",this.chatContainer=document.querySelector(e.container)),this.mode=i,this.userData=e.params||{},this.locale=e.locale||null,this.theme=e.theme||null,this.isEnabled=this.props.enabled,this.isActive=!1,this.isInited=!1,this.isInline=this.props.isInline,this.isGreetingAwaited=!1,this.areKeyactionsActive=this.props.has_keyactions,this.hasGreetingReaction=this.props.has_greeting_reaction,this.name="amo-livechat-iframe-"+be(8),this.activeClassName=this.name+"-active",this.socialServiceSize=this.props.serviceSize||50,this.socialServiceSizeWithMargin=this.socialServiceSize+4,this.servicesCount=this.props.servicesCount,this.indexLivechatInChats=this.props.indexLivechatInChats,this.handleWindowResize=this.handleWindowResize.bind(this),this.handleBusMessage=this.handleBusMessage.bind(this),window.addEventListener("message",this.handleBusMessage),this.iframe_wrapper=this.setupIframe()}var Pe="amo-livechat",ze="amo-livechat_bubble",He="amo-livechat_chat",Ue="amo-livechat_opening",De="amo-livechat_hiding",Ve="amo-livechat_hidden",We="amo-livechat-id";Re.prototype.show=function(){var t=this;!this.isActive&&this.isEnabled&&this.isInited&&(this.isActive=!0,this.hideBubble(),Fe()||this.setUUID(),setTimeout(function(){document.documentElement.classList.add(t.activeClassName),t.iframe_wrapper.classList.remove(Ue)},200),document.documentElement.classList.add(this.name),this.iframe_wrapper.classList.remove(Ve),this.iframe_wrapper.classList.add(Ue),this.iframe_wrapper.classList.add(He),this.isInline&&"vertical"===this.props.orientation&&(this.iframe_wrapper.style[this.props.position.h]=this.socialServiceSizeWithMargin+25+"px",this.iframe_wrapper.style[this.props.position.v]="top"===this.props.position.v?"-19px":"-22px"),this.sendBusMessage({method:"livechat:onShow"},"socials"),this.sendBusMessage({method:"toggle",payload:{state:!0}},"livechat"),this.handleWindowResize(),W("onChatShow"))},Re.prototype.hide=function(){var t=this;this.isActive&&this.isEnabled&&this.isInited&&(this.isActive=!1,document.documentElement.classList.remove(this.activeClassName),this.iframe_wrapper.classList.add(De),setTimeout(function(){document.documentElement.classList.remove(t.name),t.iframe_wrapper.classList.remove(De),t.iframe_wrapper.classList.remove(He),t.iframe_wrapper.classList.contains(ze)||(t.iframe_wrapper.classList.add(Ve),t.iframe_wrapper.style.height="")},200),this.sendBusMessage({method:"toggle",payload:{state:!1}}),W("onChatHide"))},Re.prototype.awaitLivechatAnimation=function(t){function e(){return n.iframe_wrapper.classList.contains(Ue)}function i(){return n.iframe_wrapper.classList.contains(De)}var n=this;switch(!0){case e():var o=setInterval(function(){n.isActive?e()||(clearInterval(o),t()):clearInterval(o)},20);break;case i():var s=setInterval(function(){n.isActive?clearInterval(s):i()||(clearInterval(s),t())},20);break;default:t()}},Re.prototype.showBubble=function(){var t=this;this.awaitLivechatAnimation(function(){t.isActive||t.props.isButtonOpened()||("widget"===t.mode&&(t.sendBusMessage({method:"bubble",payload:{state:!0}}),t.iframe_wrapper.classList.remove(Ve),t.iframe_wrapper.classList.add(ze)),t.showBadge())})},Re.prototype.hideBubble=function(){this.sendBusMessage({method:"bubble",payload:{state:!1}}),this.iframe_wrapper.classList.remove(ze),this.iframe_wrapper.classList.add(Ve),this.resizeIframeWrapper(null),this.hideBadge()},Re.prototype.showGreeting=function(){this.isInited?this.isActive||this.sendBusMessage({method:"greeting"}):this.isGreetingAwaited=!0},Re.prototype.resizeIframeWrapper=function(t){if(null===t)return this.iframe_wrapper.style.height=null,void(this.iframe_wrapper.style.width=null);this.iframe_wrapper.style.height=parseFloat(t.height)+"px",this.iframe_wrapper.style.width=parseFloat(t.width)+"px"},Re.prototype.centrifyIframeWrapper=function(t){var e=t.bubbleHeight,i=this.props.container,n=this.iframe_wrapper,o=this.props.position.v;if(i||n||o){var s=i.offsetHeight,r=(e-s)/2;n.style[o]=null;var a=getComputedStyle(n).getPropertyValue(o),c=parseInt(a,10)-r;"top"===o?c+=9:"bottom"===o&&s<50&&(c+=2);var l=c+"px";n.style[o]=l}},Re.prototype.updateBadge=function(t){this.badgeCount=t,0<(this.badge.innerText=t)&&!this.isActive&&!this.props.isButtonOpened()?this.showBadge():this.hideBadge(),this.sendBusMessage({method:"badge",payload:{count:t}},"socials")},Re.prototype.showBadge=function(){0<this.badgeCount&&!this.props.isButtonOpened()&&(this.badge.style.display=null)},Re.prototype.hideBadge=function(){this.badge.style.display="none"},Re.prototype.setUUID=function(){var t=Fe();this.sendBusMessage({method:"init",payload:{uuid:t}})},Re.prototype.setupIframe=function(){var t=this,e=this.props,i=e.account_name,n=e.button,o=e.container,s=e.greeting,r=e.greeting_bot_params,a=e.host,c=e.locale,l=e.orientation,h=e.position,u=e.socket_url,d=e.session_uid,p=document.createElement("div");p.id="amo-livechat",p.className=[Pe,Ve].concat("frame"===this.mode?["amo-livechat_frame"]:[Pe+"_"+h.v+"-"+h.h,Pe+"_"+l]).join(" "),p.style.background="frame"===this.mode?"none":"";var m=document.createElement("style");return m.id="",m.innerHTML="\n      html."+this.name+" .amo-brand {\n        display: none;\n      }\n      @media (max-width: 450px) {\n        html."+this.activeClassName+" {\n          overflow: hidden !important;\n        }\n        html."+this.activeClassName+" > body {\n          background: #fff !important;\n          overflow: hidden !important;\n        }\n        html."+this.activeClassName+" > body > *:not(.amo-button-holder) {\n          display: none;\n        }\n        ."+He+" {\n          position: fixed;\n          top: 0 !important;\n          right: 0 !important;\n          bottom: 0 !important;\n          left: 0 !important;\n          width: 100%;\n          height: 100%;\n          max-height: unset;\n          min-height: unset;\n          border-radius: 0;\n        }\n      }\n    ",this.iframe=document.createElement("iframe"),this.iframe.title="amoCRM Live Chat",this.iframe.name=this.name,this.iframe.src=a+"/livechat/index.html?lK5PIv3qurbQnoHLO3MJ-",this.iframe.onload=function(){t.isInited=!0,t.iframe.contentWindow.postMessage(JSON.stringify({method:"configure",payload:{AMO_LIVECHAT_MODE:t.mode,AMO_LIVECHAT_USER_PARAMS:t.userData,AMO_LIVECHAT_USER_LOCALE:t.locale,AMO_LIVECHAT_THEME:t.theme,AMO_LIVECHAT_UUID:t.isEnabled&&Fe(),AMO_LIVECHAT_SOCKET_URL:u,AMO_LIVECHAT_SESSION_UID:d,AMO_LIVECHAT_BUTTON_ID:n.id,AMO_LIVECHAT_BUTTON_HASH:n.hash,AMO_LIVECHAT_BUTTON_HEIGHT:t.props.container.offsetHeight,AMO_LIVECHAT_IFRAME:t.name,AMO_LIVECHAT_LOCALE:c,AMO_LIVECHAT_GREETING:s?s.message:"",AMO_LIVECHAT_GREETING_BUTTONS:s?we(s.message_buttons):[],AMO_LIVECHAT_GREETING_BOT:s?s.bot:{},AMO_LIVECHAT_GREETING_BOT_PARAMS:r||{},AMO_LIVECHAT_HEADER_COLOR:n.color,AMO_LIVECHAT_POSITION:h.v+"-"+h.h,AMO_LIVECHAT_ORIENTATION:l,AMO_LIVECHAT_DEFAULT_AVATAR:s&&s.chat_avatar_path?s.chat_avatar_path:"",AMO_LIVECHAT_TITLE:s&&s.chat_header?s.chat_header:i,AMO_LIVECHAT_USE_RESP_AVATAR:!s||""!==s.use_avatar,AMO_LIVECHAT_USE_NAME:!!s&&"Y"===s.use_name}}),a),W("onChatBoot"),t.props.onIframeLoaded()},this.badge=document.createElement("div"),this.badge.className="amo-button-greeting-badge",this.hideBadge(),p.appendChild(this.iframe),(this.chatContainer||o).appendChild(p),o.appendChild(m),o.appendChild(this.badge),window.addEventListener("resize",this.handleWindowResize),p},Re.prototype.sendBusMessage=function(t,e){switch(void 0===e&&(e="livechat"),e){case"livechat":if(!this.iframe)return;this.iframe.contentWindow.postMessage(JSON.stringify(Object.assign({},{origin:this.name},t)),this.props.host);break;case"socials":var i=window.frames&&window.frames.social_iframe;i&&i.postMessage(t,"*");break;default:throw new Error("Unknown recipient name.")}},Re.prototype.handleBusMessage=function(t){var e=this,i=this.props,n=i.greeting,o=i.host,s=i.modal;if(t.origin===o)try{var r=JSON.parse(t.data);if(r&&r.origin===this.name)switch(r.method){case"livechat:rendered":this.handleWindowResize();break;case"bubble":this.showBubble();break;case"bubble:hide":this.hideBubble();break;case"bubble:click":"function"==typeof this.props.forceButtonCollapse&&this.props.forceButtonCollapse(),this.show();break;case"bubble:autosize":var a=r.payload,c=a.height,l=a.width;this.resizeIframeWrapper({height:c,width:l});break;case"bubble:centrify":this.centrifyIframeWrapper(r.payload);break;case"badge":this.updateBadge(r.count||0);break;case"modal":s&&s.show(r.payload,this.sendBusMessage.bind(this));break;case"greeting:init":this.sendBusMessage({method:"toggle",payload:{state:this.isActive}}),this.isGreetingAwaited&&(this.isGreetingAwaited=!1,this.showGreeting()),this.hasGreetingReaction||(this.greeting=new Te(n,function(){return e.showGreeting()}));break;default:throw new Error("Unexpected bus message method - "+r.method)}}catch(t){}},Re.prototype.handleWindowResize=function(){if(this.isActive){var t=window.innerHeight,e=window.innerWidth,i=this.iframe.parentNode.getBoundingClientRect(),n="top"===this.props.position.v?i.top:i.bottom,o="top"===this.props.position.v?n+120:t-n+120;window.innerWidth<450?this.iframe.parentNode.style.height="":this.iframe.parentNode.style.height=t-o+"px",this.sendBusMessage({method:"resize",payload:{width:e}})}};function Ge(){}function qe(t){var e=t.keyactions;void 0===e&&(e=[]);var i=t.sendCRMReactions;void 0===i&&(i=Ge);var n=t.showAnimation;void 0===n&&(n=Ge);var o=t.showForm;void 0===o&&(o=Ge);var s=t.showGreeting;void 0===s&&(s=Ge),this.reached={},this.conditions={},this.reactions={},this.constraintTimeouts={},this.conditionTimeouts={},this.sendCRMReactions=i,this.showAnimation=n,this.showForm=o,this.showGreeting=s,this.parse(e),this.run()}var Xe={};qe.getConditionsItems=function(o){return void 0===o&&(o={}),Object.keys(o).reduce(function(t,e){var i=o[e],n=i.conditions[0]||{};return n&&(t[i.type]=n),t},{})},qe.getKey=function(t){return"keyaction_reached"+t},qe.compareWithMask=function(t,e,i){void 0===t&&(t=""),void 0===e&&(e="");var n=!1;switch(parseInt(i,10)){case 1:n=t===e;break;case 2:n=t!==e;break;case 3:n=t.startsWith(e);break;case 4:n=t.endsWith(e);break;case 5:n=t.includes(e);break;case 6:n=!t.includes(e);break;default:n=!1}return n},qe.prototype.parse=function(i){var n=this;Object.keys(i).forEach(function(t){var o=i[t],e=Object.keys(o.conditions);n.reactions[o.id]=o.reactions,e.length?n.conditions=e.reduce(function(t,e){var i=o.conditions[e],n=be();return t[n]={id:n,keyaction_id:o.id,constraint:o.constraint,items:qe.getConditionsItems(i.settings)},t},n.conditions):n.react({keyaction_id:o.id,constraint:o.constraint})})},qe.prototype.run=function(){var s=this;this.listenPageScroll();var r=window.location.pathname,a=parseInt(sessionStorage.getItem("amo_social_button_tracking_hits"),10)||0;Object.keys(this.conditions).forEach(function(t){var e=s.conditions[t].items,i=e.url_visited,n=e.page_hits,o=e.time_on_site;n&&n.value&&a>n.value&&s.reach(t,"page_hits"),i&&qe.compareWithMask(r,i.value,i.mask)&&s.reach(t,"url_visited"),o&&o.value&&(s.conditionTimeouts[t]=setTimeout(s.reach.bind(s,t,"time_on_site"),1e3*o.value))})},qe.prototype.reach=function(t,e){void 0===e&&(e=null);var i=this.conditions[t];i&&(this.reached[t]||(this.reached[t]=[]),e&&-1===this.reached[t].indexOf(e)&&this.reached[t].push(e),this.reached[t].length===Object.keys(i.items).length&&this.react(i))},qe.prototype.reachHook=function(n){var o=this;Object.keys(this.conditions).forEach(function(t){var e=o.conditions[t],i=(e.items||{}).custom_hook;i&&i.value===n&&o.reach(e.id,"custom_hook")})},qe.prototype.react=function(t){var s=this;if(this.checkConstraint(t)){var r=this.reactions[t.keyaction_id];Object.keys(r).forEach(function(t){var e=r[t];switch(e.action){case"amobutton_form":var i=e.settings.form.split("_"),n=i[0],o=i[1];s.showForm(n,o);break;case"amobutton_greeting":s.showGreeting();break;case"amobutton_animate":s.showAnimation(parseInt(e.settings.animation,10))}}),this.sendCRMReactions(t.keyaction_id),this.constraintTimeouts[t.keyaction_id]&&clearTimeout(this.constraintTimeouts[t.keyaction_id]),this.conditionTimeouts[t.id]&&clearTimeout(this.conditionTimeouts[t.id])}},qe.prototype.checkConstraint=function(t){var e=t.keyaction_id,i=!1;try{switch(parseInt(t.constraint,10)){case 2:sessionStorage.getItem(qe.getKey(e))||(sessionStorage.setItem(qe.getKey(e),"y"),i=!0);break;case 4:localStorage.getItem(qe.getKey(e))||(localStorage.setItem(qe.getKey(e),"y"),i=!0);break;case 3:var n=(parseInt(localStorage.getItem(qe.getKey(e,"shown_at")),10)||0)+864e5;if(Date.now()<n){var o=n-Date.now();o/1e3<900&&(this.constraintTimeouts[e]=setTimeout(this.react.bind(this,t),o))}else i=!0;break;default:Xe[qe.getKey(e)]||(Xe[qe.getKey(e)]="y",i=!0)}}catch(t){i=!1}return i},qe.prototype.listenPageScroll=function(){for(var t=Object.keys(this.conditions),e=!1,i=0,n=t.length;i<n&&!(e=!!this.conditions[t[i]].items.scrolled_value);i+=1);e&&(this.handlePageScrollDebounced=Be(this.handlePageScroll.bind(this),100),window.addEventListener("scroll",this.handlePageScrollDebounced),this.handlePageScroll())},qe.prototype.handlePageScroll=function(){var s=this,r=window.innerHeight*(window.innerHeight/document.documentElement.scrollHeight),a=window.pageYOffset+r;Object.keys(this.conditions).forEach(function(t){var e=s.conditions[t].items.scrolled_value;if(e){var i=e.unit,n=e.value,o="%"===i?document.documentElement.scrollHeight*n/100:n;r+o<=a&&s.reach(t,"scrolled_value")}})};function Ke(t){void 0===t&&(t={}),this.props=t,this.initModalIframe()}var Je="amo-modal",Ye="amo-modal_hidden";Ke.prototype.initModalIframe=function(){var e=this;this.isActive=!1,this.name="amo-modal-iframe-"+be(8),window.addEventListener("message",function(t){return e.handleBusMessage(t)}),this.iframe_wrapper=this.setupIframe()},Ke.prototype.setupIframe=function(){var t=this,e=this.props,i=e.host,n=e.container,o=document.createElement("div");o.id="amo-modal",o.className=[Je,Ye].join(" ");var s=document.createElement("style");return s.type="text/css",s.id="",s.innerHTML="\n      ."+Je+" {\n        position: fixed;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        z-index: 2147483648;\n      }\n      ."+Je+" > iframe {\n        border: none;\n        width: 100%;\n        height: 100%;\n      }\n      ."+Ye+" {\n        display: none;\n      }\n    ",this.iframe=document.createElement("iframe"),this.iframe.title="amoCRM Media Modal",this.iframe.name=this.name,this.iframe.src=i+"/modal/index.html?lK5PIv3qurbQnoHLO3MJ-",this.iframe.onload=function(){t.iframe.contentWindow.postMessage(JSON.stringify({method:"configure",payload:{AMO_MODAL_IFRAME:t.name}}),i)},o.appendChild(this.iframe),o.appendChild(s),n.appendChild(o),o},Ke.prototype.show=function(t,e){this.isActive||(this.isActive=!0,this.sendBusMessageToLivechat=e,this.iframe_wrapper.classList.remove(Ye),document.documentElement.classList.add(this.name),pe([this.props.container]),this.iframe.focus(),this.sendBusMessage({method:"show",payload:t}))},Ke.prototype.close=function(){this.isActive&&(this.isActive=!1,me([this.props.container]),document.documentElement.classList.remove(this.name),this.iframe_wrapper.classList.add(Ye),document.removeEventListener("keydown",this.closeOnEsc),this.sendBusMessage({method:"clear"}))},Ke.prototype.sendBusMessage=function(t){this.iframe&&this.iframe.contentWindow.postMessage(JSON.stringify(Object.assign({},{origin:this.name},t)),this.props.host)},Ke.prototype.handleBusMessage=function(t){if(t.origin===this.props.host)try{var e=JSON.parse(t.data);if(e&&e.origin===this.name)switch(e.method){case"close":this.close();break;case"event":this.sendBusMessageToLivechat({method:"event",payload:e.payload});break;default:throw new Error("Unexpected bus message method - "+e.method)}}catch(t){}};function $e(){return Array.prototype.slice.call(document.all).reduce(function(t,e){return Math.max(t,+window.getComputedStyle(e).zIndex||0)},0)}!function(){function t(t,e){return t(e={exports:{}},e.exports),e.exports}for(var c=t(function(t){var e,i,n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);n?(e=new Uint8Array(16),t.exports=function(){return n(e),e}):(i=new Array(16),t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i})}),l=[],e=0;e<256;++e)l[e]=(e+256).toString(16).substr(1);function i(t,e,i){var n=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o,s,r=(t=t||{}).random||(t.rng||c)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var a=0;a<16;++a)e[n+a]=r[a];return e||(s=s||0,[l[(o=r)[s++]],l[o[s++]],l[o[s++]],l[o[s++]],"-",l[o[s++]],l[o[s++]],"-",l[o[s++]],l[o[s++]],"-",l[o[s++]],l[o[s++]],"-",l[o[s++]],l[o[s++]],l[o[s++]],l[o[s++]],l[o[s++]],l[o[s++]]].join(""))}var r="amo_social_button_tracking_pages",a="amo_social_button_tracking_hits",h="amo_social_button_tracking_time",u="amo_social_button_tracking_referrer",n="amo_social_button_tracking_uuid",o="amo_social_button_tracking_session_id",s="is_send_follow_link",d=!1,p=null;function m(){return document.title?document.title+" ("+window.location.pathname+")":window.location.pathname}function f(){var t=window.sessionStorage.getItem(n);return t||(t=i(),window.sessionStorage.setItem(n,t)),t}function g(){var t=window.sessionStorage.getItem(o);return t||(t=function(t){void 0===t&&(t=21);for(var e="",i=crypto.getRandomValues(new Uint8Array(t));t--;){var n=63&i[t];e+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return e}(11),window.sessionStorage.setItem(o,t)),t}var y="%[a-f0-9]{2}",v=new RegExp(y,"gi"),_=new RegExp("("+y+")+","gi");function b(e){try{return decodeURIComponent(e)}catch(t){for(var i=e.match(v),n=1;n<i.length;n++)i=(e=function t(e,i){try{return decodeURIComponent(e.join(""))}catch(t){}if(1===e.length)return e;i=i||1;var n=e.slice(0,i);i=e.slice(i);return Array.prototype.concat.call([],t(n),t(i))}(i,n).join("")).match(v);return e}}function w(t,e){if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];var i=t.indexOf(e);return-1===i?[t]:[t.slice(0,i),t.slice(i+e.length)]}var k=t(function(t,a){function f(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(t,e){return e.encode?e.strict?encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}):encodeURIComponent(t):t}function g(t,e){return e.decode?function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},i=_.exec(t);i;){try{e[i[0]]=decodeURIComponent(i[0])}catch(t){var n=b(i[0]);n!==i[0]&&(e[i[0]]=n)}i=_.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),s=0;s<o.length;s++){var r=o[s];t=t.replace(new RegExp(r,"g"),e[r])}return t}(e)}}(t):t}function l(t){var e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function o(t){var e=(t=l(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function y(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function s(t,e){f((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);var i=function(n){var o;switch(n.arrayFormat){case"index":return function(t,e,i){o=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),o?(void 0===i[t]&&(i[t]={}),i[t][o[1]]=e):i[t]=e};case"bracket":return function(t,e,i){o=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),o?void 0!==i[t]?i[t]=[].concat(i[t],e):i[t]=[e]:i[t]=e};case"comma":case"separator":return function(t,e,i){e="string"==typeof e&&-1<e.split("").indexOf(n.arrayFormatSeparator)?e.split(n.arrayFormatSeparator).map(function(t){return g(t,n)}):null===e?e:g(e,n),i[t]=e};default:return function(t,e,i){void 0!==i[t]?i[t]=[].concat(i[t],e):i[t]=e}}}(e),n=Object.create(null);if("string"!=typeof t)return n;if(!(t=t.trim().replace(/^[?#&]/,"")))return n;for(var o=0,s=t.split("&");o<s.length;o+=1){var r=s[o],a=(r=(a=w(e.decode?r.replace(/\+/g," "):r,"="))[0],void 0===(a=a[1])?null:["comma","separator"].includes(e.arrayFormat)?a:g(a,e));i(g(r,e),a,n)}for(var c=0,l=Object.keys(n);c<l.length;c+=1){var h=l[c],u=n[h];if("object"==typeof u&&null!==u)for(var d=0,p=Object.keys(u);d<p.length;d+=1){var m=p[d];u[m]=y(u[m],e)}else n[h]=y(u,e)}return!1===e.sort?n:(!0===e.sort?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce(function(t,e){var i=n[e];return Boolean(i)&&"object"==typeof i&&!Array.isArray(i)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(i):t[e]=i,t},Object.create(null))}a.extract=o,a.parse=s,a.stringify=function(i,n){if(!i)return"";f((n=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},n)).arrayFormatSeparator);for(var o=function(o){switch(o.arrayFormat){case"index":return function(n){return function(t,e){var i=t.length;return void 0===e||o.skipNull&&null===e||o.skipEmptyString&&""===e?t:null===e?t.concat([[c(n,o),"[",i,"]"].join("")]):t.concat([[c(n,o),"[",c(i,o),"]=",c(e,o)].join("")])}};case"bracket":return function(i){return function(t,e){return void 0===e||o.skipNull&&null===e||o.skipEmptyString&&""===e?t:null===e?t.concat([[c(i,o),"[]"].join("")]):t.concat([[c(i,o),"[]=",c(e,o)].join("")])}};case"comma":case"separator":return function(i){return function(t,e){return null==e||0===e.length?t:0===t.length?[[c(i,o),"=",c(e,o)].join("")]:[[t,c(e,o)].join(o.arrayFormatSeparator)]}};default:return function(i){return function(t,e){return void 0===e||o.skipNull&&null===e||o.skipEmptyString&&""===e?t:null===e?t.concat([c(i,o)]):t.concat([[c(i,o),"=",c(e,o)].join("")])}}}}(n),t={},e=0,s=Object.keys(i);e<s.length;e+=1){var r=s[e];n.skipNull&&null==i[r]||n.skipEmptyString&&""===i[r]||(t[r]=i[r])}var a=Object.keys(t);return!1!==n.sort&&a.sort(n.sort),a.map(function(t){var e=i[t];return void 0===e?"":null===e?c(t,n):Array.isArray(e)?e.reduce(o(t),[]).join("&"):c(t,n)+"="+c(e,n)}).filter(function(t){return 0<t.length}).join("&")},a.parseUrl=function(t,e){e=Object.assign({decode:!0},e);var i=(n=w(t,"#"))[0],n=n[1];return Object.assign({url:i.split("?")[0]||"",query:s(o(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:g(n,e)}:{})},a.stringifyUrl=function(t,e){e=Object.assign({encode:!0,strict:!0},e);var i=l(t.url).split("?")[0]||"",n=a.extract(t.url),o=a.parse(n,{sort:!1}),s=Object.assign(o,t.query),r=(r=a.stringify(s,e))&&"?"+r;o="",-1!==(s=(n=t.url).indexOf("#"))&&(o=n.slice(s)),o=o;return t.fragmentIdentifier&&(o="#"+c(t.fragmentIdentifier,e)),""+i+r+o}}),I=(k.extract,k.parse,k.stringify,k.parseUrl,k.stringifyUrl,["from","openstat_service","openstat_campaign","openstat_ad","openstat_source","utm_source","utm_medium","utm_campaign","utm_content","utm_term","utm_referrer","gсlid","fbclid","yclid","referrer"]),C={baseURL:""};var E=!1,x=!1;window.AMO_PIXEL_CLIENT||(window.addEventListener("message",function(t){switch(t.data){case"SET_AMO_PIXEL_READY":x=!(E=!0);break;case"IS_AMO_PIXEL_READY?":E?t.source.postMessage("AMO_PIXEL_READY",t.origin):x?t.source.postMessage("AMO_PIXEL_LOADING",t.origin):(x=!0,t.source.postMessage("AMO_PIXEL_NOT_READY",t.origin))}}),window.AMO_PIXEL_CLIENT={getSessionUid:f,getShortSessionId:g,getTrackingLink:function(){if(!window.AMOCRM_NO_TRACKING&&!window.sessionStorage.getItem(s))return window.sessionStorage.setItem(s,"y"),document.location.href},makeMetadata:function(){if(!p){var t,e;try{t=JSON.parse(window.sessionStorage.getItem(r)||{})}catch(e){t={}}e=(parseFloat(window.sessionStorage.getItem(h))||0)/1e3,p={hits:parseInt(window.sessionStorage.getItem(a),10)||0,pages:Object.keys(t),referrer:window.sessionStorage.getItem(u),time:parseInt(e,10),page:""},window.AMOCRM_NO_TRACKING||(p.page=m())}return p},registerHit:function(){if(!d){var t,e=window.sessionStorage.getItem(u),i=document.referrer.split("/")[2],n=window.location.hostname,o=parseInt(window.sessionStorage.getItem(a),10)||0,s=parseFloat(window.sessionStorage.getItem(h),10)||0;f(),g();try{t=JSON.parse(window.sessionStorage.getItem(r)||{})}catch(e){t={}}i&&i!==e&&i!==n&&(window.sessionStorage.setItem(u,i),window.sessionStorage.setItem(h,"0"),o=0,t={}),window.AMOCRM_NO_TRACKING||(t[m()]=!0,window.sessionStorage.setItem(r,JSON.stringify(t))),window.sessionStorage.setItem(h,s.toString()),window.sessionStorage.setItem(a,(o+1).toString()),window.sessionStorage.setItem(h,s.toString()),window.window.addEventListener("beforeunload",function(){s+=performance.now(),window.sessionStorage.setItem(h,s.toString())}),d=!0}},extractTrackingParamsFromUrl:function(){return i=k.parse(location.search),e=I,Object.keys(i).filter(function(t){return 0<=e.indexOf(t)}).reduce(function(t,e){return Object.assign(t,((t={})[e]=i[e],t))},{});var i,e},extractTrackingParamsFromTrackers:function(e){var t;t=function(){var n,t;function o(t){"undefined"!=typeof ga?ga(function(){t([ga.getAll().map(function(t){return{key:"gclientid",value:t.get("clientId")}})[0]])}):t([])}function s(e){var i;"undefined"!=typeof Ya?(i=(Ya.Metrika||Ya.Metrika2).counters().map(function(t){return t&&t.id}).filter(function(t){return t})[0],"undefined"!=typeof ym?ym(i,"getClientID",function(t){e([{key:"_ym_counter",value:i},{key:"_ym_uid",value:t}])}):void 0!==window["yaCounter"+i]?e([{key:"_ym_counter",value:i},{key:"_ym_uid",value:window["yaCounter"+i].getClientID()}]):e([])):e([])}function r(t){void 0!==window.roistat?t([{key:"roistat",value:window.roistat.getVisit()}]):t([])}n=function(t){!function(t,i){var n,o=[],s=[],r=setTimeout(function(){clearInterval(n),i(o),window.removeEventListener("beforeunload",i.bind(null,o))},5e3);window.addEventListener("beforeunload",i.bind(null,o));var e=0;function a(){e=0,t.forEach(function(t){e++;try{t(function(t){var e=s.indexOf(t);-1<e&&((t=Array.prototype.slice.call(arguments,1))&&t.length&&t.filter(function(t){return t.length}).length&&(s.splice(e,1),o=o.concat(t)),s.length||(clearTimeout(r),clearInterval(n),window.removeEventListener("beforeunload",i.bind(null,o)),i(o)))}.bind(null,e))}catch(t){}})}t.forEach(function(){e++,s.push(e)}),a(),s.length&&(n=setInterval(function(){t.length&&a()},500))}(t,e)},(t=new XMLHttpRequest).onload=function(){var e;try{e=JSON.parse(t.response)}catch(t){e={}}var i=[o,s,r];Object.keys(e).forEach(function(t){i.push(new Function(e[t]))}),n(i)},t.onerror=function(t){var e=[o,s,r];console.error("Failed to get custom trackers "+t.currentTarget.statusText),n(e)},t.open("GET",C.baseURL+"/callbacks/?id="+C.id+"&hash="+C.hash),t.send()},"complete"===document.readyState?t():document.onreadystatechange=function(){"complete"===document.readyState&&t()}},configure:function(t){Object.assign(C,t)}})}();function Ze(t){this.document=document,this.window=window,this.meta_params=t,this.bot_params={},this.init(t)}Ze.prototype.init=function(t){var e=this,i=(t=t||{}).id||0,n=t.hash||!1,o="ru"!==t.locale?"com":"ru",s=t.locale&&-1<["en","ru","es"].indexOf(t.locale)?t.locale:"en",r=e.document.querySelector("#amo_social_button_script").parentNode;e.id=i,e.hash=n,e.collapsed=!0,e.lang_id=s,e.modal=null,e.greetingAwaited=!1,e.keyactionsAwaited=[],e.user_config=window.amoSocialButtonConfig||{},e.socialFrameReady=!1,e.DEFAULT_Z_INDEX=parseInt($e()),e.parent_node="HEAD"!==r.tagName?r:e.document.body,e.server_host="https://gso.amocrm."+o,e.forms_host="https://forms.amocrm."+o+"/forms/assets/js/amoforms.js",e.locale=o,0<i&&n&&e.get_settings(i,n),e.langs={en:{made_by:"Made by "},ru:{made_by:"Сделано в "},es:{made_by:"Hecho por "}}},Ze.prototype.get_settings=function(e,t){var s=this,i=s.server_host+"/social_button/settings/?client_version=3&id="+e+"&hash="+t,r=new XMLHttpRequest;r.onload=function(){if(200===r.status){var t,i=q.toASCII(s.window.location.hostname),n=!1,o={};try{t=JSON.parse(r.response),o=t.response.result?t.response:t.response[e],Object.keys(o.domains).map(function(t,e){if(!1===n&&-1!==q.toASCII(o.domains[t]).search(i))return n=!0,s.check_settings(o),AMO_PIXEL_CLIENT.registerHit(),s.render(),!1})}catch(t){}s.meta_params.inline=s.meta_params.inline&&!s.isOnlyOneButton()}},r.open("GET",i),r.send()},Ze.prototype.check_settings=function(t){var e,i;switch(this.settings=t.settings,this.settings.button.size=this.meta_params.inline?this.settings.button.size-10:this.settings.button.size,this.settings.date_update=t.date_update,this.settings.keyactions=t.key_actions||{},this.getVersion()){case 3:case 2:e=parseInt(this.settings.button.size),i=parseInt(this.settings.button.radius),this.orientation=parseInt(this.settings.button.orientation),this.settings.button.size=isNaN(e)?50:e,this.settings.button.radius=isNaN(i)?35:i,"Y"===this.settings.button.fixed&&(this.parent_node=document.body);break;case 1:default:e=parseInt(this.settings.button.button_size),this.settings.button.button_size=isNaN(e)?50:e,this.orientation=parseInt(this.settings.button.orient),this.settings.button.is_fixed||this._checkIfVerticalNotFixed(),"Y"===this.settings.button.is_fixed&&(this.parent_node=document.body)}this.services_count=Object.keys(this.settings.social_services).length},Ze.prototype.getVersion=function(){return this.settings?this.settings.version?this.settings.version:1:2},Ze.prototype._checkIfVerticalNotFixed=function(){this.settings.button.button_position="bottom-left"},Ze.prototype.render=function(){var t,e=this,i=document.createElement("link"),n=e.getVersion();i.rel="stylesheet",1===n?i.href=e.server_host+"/css/main.css":(i.href=e.server_host+"/css/v"+n+"/main.css?lK5PIv3qurbQnoHLO3MJ-",(t=document.createElement("link")).href=e.server_host+"/css/v"+n+"/keyframes.css?lK5PIv3qurbQnoHLO3MJ-",t.rel="stylesheet",e.document.head.appendChild(t)),i.onload=function(){1===n?e.render_frame():e.renderFrame()},e.document.head.appendChild(i)},Ze.prototype.getZIndexForElement=function(t){switch(t){case"mainHolder":return this.DEFAULT_Z_INDEX+1;case"socialIFrame":return this.DEFAULT_Z_INDEX+2;case"livechat":return this.DEFAULT_Z_INDEX+3;default:return this.DEFAULT_Z_INDEX}},Ze.prototype.renderFrame=function(){var e=this,i=this,t=i.getVersion(),n=this.server_host+"/buttons/v"+t+"/html/"+this.hash+".html?"+this.settings.date_update,o=this.document.createElement("iframe"),s={button:null,holder:null,link_holder:null,animation:this.getAnimation(),theme:this.settings.button.theme,size:parseInt(this.settings.button.size),position:this.makePositionParams(),orientation:parseInt(this.settings.button.orientation),is_fixed:"Y"===this.settings.button.fixed};s.holder=this.renderHolder(s),s.button=this.renderMainButton(s),this.setFrame(o,n,t,s),s.holder.insertBefore(o,s.holder.children[0]),s.link_holder=this.renderBrand(s),this.setOrientation(o,s),this.setBrandPosition(s),this.setPosition(s),this.displayAnimation(s),o.onload=function(){i.set_social(i.settings),i.initApiMeta(),s.button.addEventListener("click",function(t){return t.stopPropagation(),i.onButtonClick(s),!1}),i.forceButtonCollapse=function(){i.onButtonClick(s,{collapseSocials:!0})},i.addClicksListener()},this.initModal(s),this.initFormModal(s),this.initKeyActions(s),Z(function(t){switch(t){case"livechat":return e.livechat;case"keyactions":return e.keyactions;default:return null}})},Ze.prototype.isOnlyOneButton=function(){var t=Object.keys(this.settings.social_services);return 1===t.length&&this.settings.social_services[t[0]].type||""},Ze.prototype.getButtonColor=function(){return this.user_config.color||this.settings.button.color},Ze.prototype.getButtonRadius=function(){return this.user_config.radius||this.settings.button.radius},Ze.prototype.getAnimation=function(){return this.settings.button.animation?parseInt(this.settings.button.animation):0},Ze.prototype.onButtonClick=function(t,e){var i=this;if(this.meta_params.inline&&this.is_not_first_click)this.onMessage({data:"click_button"});else{this.is_not_first_click=!0;var n=e&&e.collapseSocials||!1,o=!t.button.classList.contains("amo-button--only-livechat"),s=this.getParamToNull(),r=G(s);this.collapsed?(this.collapsed=!1,o&&!n&&(this.soc_frame.elem[s]=this.soc_frame[s],this.soc_frame.elem.style["min"+r]=this.soc_frame[s]+"px"),t.button.classList.add("maincollapsed"),this.meta_params.inline?(this.setBackgroundColor(t.button,"transparent"),this.setBorderColor(t.button,"transparent")):(this.setBackgroundColor(t.button,"white"===t.theme?"#FFF":"#000"),this.setBorderColor(t.button,"white"===t.theme?this.getButtonColor():"#FFF")),this.setHolderPadding(t),t.link_holder.classList.add("collapsed"),this.hideAnimation(t.button),this.livechat&&(this.livechat.hideBubble(),o||this.livechat.show())):(this.collapsed=!0,t.button.classList.remove("maincollapsed"),t.link_holder.classList.remove("collapsed"),this.resetHolderPadding(t),this.livechat&&(this.livechat.hide(),this.livechat.isEnabled&&this.livechat.showBubble()),this.is_form_shown&&this.hideForm(),this.setBackgroundColor(t.button,this.getButtonColor()),this.setBorderColor(t.button,""),this.displayAnimation(t),setTimeout(function(){!0===i.collapsed&&(i.soc_frame.elem[s]=0,i.soc_frame.elem.style["min"+r]="0px")},1e3)),this.soc_frame.elem.contentWindow.postMessage({method:"button:click",payload:{showSocials:!this.collapsed&&!n,isInline:this.meta_params.inline,buttonTheme:t.theme}},"*")}},Ze.prototype.displayAnimation=function(t){var e="";switch(t.animation){case 0:return;case 1:e="amo_animation_waves";break;case 2:e="amo_animation_tremble";break;case 3:e="amo_animation_shake"}e&&(t.button.className+=" "+e)},Ze.prototype.hideAnimation=function(t){t.className=t.className.replace(/\bamo_animation_[a-z]+\b/g,"")},Ze.prototype.isMobileDevice=function(){return(0<window.innerWidth?window.innerWidth:screen.width)<640},Ze.prototype.makePositionParams=function(){var t,e,i,n,o=this.isMobileDevice();return n=parseInt(this.settings.button.position)%2==0?"right":"left",i=2<parseInt(this.settings.button.position)?"bottom":"top",e=o?(t=this.settings.button.x_offset_m,this.settings.button.y_offset_m):(t=this.settings.button.x_offset,this.settings.button.y_offset),{x:t,y:e,v:i,h:n}},Ze.prototype.setBrandPosition=function(t){if(this.disable_titles=!1,2===t.orientation){if(t.position.y<24)return void(t.link_holder.style.display="none");"top"===t.position.v&&(t.link_holder.style.top="-20px"),"bottom"===t.position.v&&(t.link_holder.style.bottom="-18px")}else{if("bottom"===t.position.v&&t.position.y<24)return this.disable_titles=!0,void(t.link_holder.style.display="none");this.meta_params.inline&&(t.link_holder.style[t.position.h]=0),t.link_holder.style.bottom="-18px"}t.position.x<20&&t.link_holder.classList.add("amo-brand_to-"+t.position.h)},Ze.prototype.renderHolder=function(t){var e=this.document.createElement("div"),i=this.isOnlyOneButton(),n="livechat"===i,o=i&&!n?i:"";return e.className="amo-button-holder "+(2===t.orientation?"amo-vertical":"amo-horisontal"),e.style.position=t.is_fixed?"fixed":"absolute",e.innerHTML=['<div class="amo-button amo-button--main '+(n?"amo-button--only-livechat":"")+" "+(o?"amo-button--only-social":"")+' js-amo-button" id="amobutton" data-social="'+o+'" style="width: '+t.size+"px; height:"+t.size+"px; z-index: "+this.getZIndexForElement("livechat")+'">','<div class="amo-button--main-icon'+(this.meta_params.inline?" amo-button--no-fill":"")+'">',3===this.getVersion()?'<svg class="amo-button--close-icon" width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.33274 11.3695L2.46267 18.2395C1.89896 18.8032 0.98461 18.8057 0.42219 18.2433C-0.144151 17.677 -0.138549 16.7673 0.42597 16.2028L7.29603 9.33276L0.42597 2.46267C-0.137747 1.89896 -0.14023 0.984599 0.42219 0.422179C0.988531 -0.144162 1.89816 -0.138538 2.46267 0.425981L9.33274 7.29605L16.2028 0.425981C16.7666 -0.137736 17.6809 -0.140241 18.2433 0.422179C18.8097 0.98852 18.8041 1.89816 18.2395 2.46267L11.3694 9.33276L18.2395 16.2028C18.8033 16.7665 18.8057 17.6809 18.2433 18.2433C17.677 18.8097 16.7674 18.804 16.2028 18.2395L9.33274 11.3695Z" />/svg>':"","</div>","</div>"].join(""),t.is_fixed&&(e.style.zIndex=this.getZIndexForElement("mainHolder")),this.parent_node.appendChild(e),e},Ze.prototype.renderMainButton=function(t){var e=t.holder.querySelector(".js-amo-button");return this.setBackgroundColor(e,this.getButtonColor()),this.setBorderRadius(e,this.getButtonRadius()),e.style.float=""===t.is_fixed?"left":t.position.h,this.user_config.hidden&&(e.style.display="none"),e},Ze.prototype.setBackgroundColor=function(t,e){t.style.backgroundColor=e},Ze.prototype.setBorderRadius=function(t,e){t.style.borderRadius=e+"px"},Ze.prototype.setBorderColor=function(t,e){3===this.getVersion()&&(t.style.borderColor=e,t.style.fill=e)},Ze.prototype.renderBrand=function(t){var e=this.document.createElement("div"),i="https://www.amocrm."+this.locale,n=this.langs[this.lang_id].made_by+" amoCRM";return"es"===this.lang_id&&(i+="/es/"),e.className="amo-brand",e.id="amo_brand",e.style.width="min-content",this.meta_params.inline&&2!==t.orientation||(e.style.left="50%",e.style.transform="translateX(-50%)"),e.innerHTML='<p class="amo-brand__link-holder"><a target="_blank" href="'+i+'" class="amo-brand__link">'+n+"</a></p>",t.holder.appendChild(e),e},Ze.prototype.setHolderPadding=function(t){if(!this.meta_params.inline&&2===t.orientation){var e=7+(t.size+10)*this.services_count+"px";switch(t.position.v){case"top":t.holder.style.paddingBottom=e;break;case"bottom":t.holder.style.paddingTop=e}}},Ze.prototype.resetHolderPadding=function(t){if(2===t.orientation)switch(t.position.v){case"top":t.holder.style.paddingBottom="0px";break;case"bottom":t.holder.style.paddingTop="0px"}},Ze.prototype.setOrientation=function(t,e){if(this.isOnlyOneButton())return t.style.top="7px",void(t.style.left="7px");if(2===e.orientation){var i=(this.meta_params.inline?-15:e.size-5)+"px",n=this.meta_params.inline?"-4px":0;switch(e.position.v){case"top":t.style.top=i,t.style.bottom="inherit","right"===e.position.h?(t.style.right=n,t.style.left="inherit"):(t.style.left=n,t.style.right="inherit");break;case"bottom":t.style.top="inherit",t.style.bottom=i,"right"===e.position.h?(t.style.right=n,t.style.left="inherit"):(t.style.left=n,t.style.right="inherit")}}else{switch("bottom"===e.position.v&&(t.style.top="auto",t.style.bottom=this.meta_params.inline?"-25px":"-20px"),e.position.v){case"bottom":t.style.top="auto",t.style.bottom=this.meta_params.inline?"-25px":"-20px";break;case"top":t.style.top=this.meta_params.inline&&"-4.5px"}var o=this.meta_params.inline?"-33px":e.size-15+"px";switch(e.position.h){case"left":t.style.left=o,t.style.right="inherit";break;case"right":t.style.left="inherit",t.style.right=o}}},Ze.prototype.setPosition=function(t){if(t.holder.style[t.position.h]=t.position.x+"px",t.holder.style[t.position.v]=t.position.y+"px",this.meta_params.inline){var e=0;for(var i in this.settings.social_services){"livechat"===this.settings.social_services[i].type&&(e=i)}var n=t.holder.querySelector(".amo-button--main");n.style.pointerEvents="none",n.style.backgroundColor="transparent",1===t.orientation?n.style[t.position.h]=(t.size+4)*e-7+"px":n.style[t.position.v]=(t.size+4)*e-7+8+"px"}},Ze.prototype.checkIfFormsNeeds=function(){0!==parseInt(this.settings.button.form)&&this.renderForms()},Ze.prototype.renderForms=function(){var t=this.getFormData();this.insertForms(t)},Ze.prototype.render_frame=function(){var e,i=this,t=i.settings.button.is_fixed,n=i.document.createElement("iframe"),o=i.document.createElement("div"),s=i.document.createElement("div"),r=i.server_host+"/buttons/html/"+i.hash+".html?"+i.settings.date_update,a=i.settings.button.button_position.split("-"),c="https://www.amocrm."+i.locale;if("es"===i.lang_id&&(c+="/es/"),o.className="amo-button-holder "+(2===i.orientation?"amo-vertical":"amo-horisontal"),o.style.position=t?"fixed":"absolute",o.innerHTML='<div class="amo-button amo-button--main js-amo-button" id="amobutton" style="width:'+i.settings.button.button_size+"px; height:"+i.settings.button.button_size+'px"></div>',t&&(o.style.zIndex=parseInt($e())),i.parent_node.appendChild(o),i.button_holder=o,e=o.querySelector(".js-amo-button"),i.settings.button.hasOwnProperty("color")&&(e.style.backgroundColor=i.settings.button.color),e.style.float=""===i.settings.button.is_fixed?"left":a[1],this.setFrame(n,r,1),o.insertBefore(n,o.children[0]),o.style.height=i.soc_frame.height+"px",2===this.orientation)switch(a[0]){case"top":o.style.paddingBottom=7+(i.settings.button.button_size+10)*i.services_count+"px";break;case"bottom":o.style.paddingTop=7+(i.settings.button.button_size+10)*i.services_count+"px"}s.className="amo-brand",s.id="amo_brand",i.brand_holder=s,1===i.orientation&&(s.style[t?a[1]:"left"]="7px"),s.innerHTML='<p class="amo-brand__link-holder" style="float: '+(t?a[1]:"left")+'">'+i.langs[i.lang_id].made_by+' <a target="_blank" href="'+c+'" class="amo-brand__link">amoCRM</a></p>',o.appendChild(s),2===i.orientation&&i.setVerticalBrandPos(a),"Y"===i.settings.button.is_fixed?(o.style[a[1]]=(""===i.settings.button.horisontal_position?0:i.settings.button.horisontal_position)+"px",o.style[a[0]]=(""===i.settings.button.vertical_position?0:i.settings.button.vertical_position)+"px","right"==a[1]&&n.setAttribute("style","right:0; left: inherit")):2===i.orientation&&(o.style.bottom=0),n.onload=function(){i.set_social(i.settings),i.initApiMeta(),e.addEventListener("click",function(t){return t.stopPropagation(),i.onButtonClickV1(e,s),!1}),i.checkIfFormsNeeds()}},Ze.prototype.initApiMeta=function(){var i=this;if(i.meta_params.setMeta=function(t){var e=i.window.frames.social_iframe;"object"==typeof t&&Object.assign(i.bot_params,t.bot_params||{}),e.postMessage({method:"send_meta",payload:{metaData:t}},"*")},i.meta_params.params){for(var t in i.meta_params.params)i.meta_params.setMeta(i.meta_params.params[t]);delete i.meta_params.params}AMO_PIXEL_CLIENT.configure({baseURL:i.server_host,id:i.id,hash:i.hash});var o=AMO_PIXEL_CLIENT.extractTrackingParamsFromUrl();AMO_PIXEL_CLIENT.extractTrackingParamsFromTrackers(function(t){var n=[];if(t.forEach(function(t){0<t.length&&t.forEach(function(t){t.key&&t.value&&n.push({field_code:t.key.toUpperCase(),values:[{value:t.value}]})})}),Object.keys(o).map(function(t,e){var i=o[t];n.push({field_code:t.toUpperCase(),values:[{value:i}]})}),0<n.length){var e={lead:{custom_fields_values:n}};i.meta_params.setMeta(e)}})},Ze.prototype.onButtonClickV1=function(t,e){var i=this,n=this.getParamToNull();this.collapsed?(this.collapsed=!1,this.soc_frame.elem[n]=this.soc_frame[n],t.classList.add("maincollapsed"),e.classList.add("collapsed")):(this.collapsed=!0,t.classList.remove("maincollapsed"),e.classList.remove("collapsed"),this.is_form_shown&&this.hideForm(),setTimeout(function(){!0===i.collapsed&&(i.soc_frame.elem[n]=0)},1e3)),this.soc_frame.elem.contentWindow.postMessage({method:"button:click",payload:{showSocials:!this.collapsed}},"*")},Ze.prototype.getParamToNull=function(){return 1===parseInt(this.orientation)?"width":"height"},Ze.prototype.setFrame=function(t,e,i,n){void 0===n&&(n={});var o=this.isOnlyOneButton();this.soc_frame={},this.soc_frame.elem=t,this.setSizes(i),t.id="social_iframe",t.setAttribute("name","social_iframe"),t.src=e,t.scrolling="no",t.className="amo-button__iframe",o&&"livechat"!==o&&(t.style.opacity=0),n.is_fixed&&(t.style.zIndex=this.getZIndexForElement("socialIFrame"))},Ze.prototype.setSizes=function(t){var e=this.isOnlyOneButton();3===t&&e&&"livechat"!==e?this.setOnlySizes():(1===t?2===parseInt(this.orientation):2===parseInt(this.settings.button.orientation))?this.setVerticalSizes(t):this.setHorisontalSizes(t)},Ze.prototype.setOnlySizes=function(){this.soc_frame.width=this.settings.button.size,this.soc_frame.height=this.settings.button.size,this.soc_frame.elem.width=this.settings.button.size,this.soc_frame.elem.height=this.settings.button.size},Ze.prototype.setVerticalSizes=function(t){var e=this.services_count,i=this.meta_params.inline?this.settings.button.size+10:this.settings.button.size;1===t?(this.soc_frame.width=this.settings.button.button_size+14,this.soc_frame.height=this.settings.button.button_size+14+(this.settings.button.button_size+10)*e,this.soc_frame.elem.width=this.soc_frame.width):(this.soc_frame.width=i+100,this.soc_frame.height=(i-6)*e+40,this.soc_frame.elem.width=this.soc_frame.width,this.soc_frame.elem.style.minWidth=this.soc_frame.width+"px"),this.soc_frame.elem.height=0},Ze.prototype.setHorisontalSizes=function(t){var e,i,n,o=this.services_count,s=this.makePositionParams(),r="bottom"===s.v?36:38;e=this.meta_params.inline?this.settings.button.size+4:this.settings.button.size-10+4,1===t?(this.soc_frame.width=this.settings.button.button_size+14+(this.settings.button.button_size+10)*o,this.soc_frame.height=this.settings.button.button_size+14+20,this.soc_frame.elem.width=0,this.soc_frame.elem.height=this.soc_frame.height):(i=Math.min((this.settings.button.size-6)*o+(3===t?50:40),window.innerWidth-s.x-this.settings.button.size-15),this.meta_params.inline&&(i+=this.settings.button.size),n=Math.floor(i/this.settings.button.size),this.soc_frame.width=i,this.soc_frame.height=Math.ceil(Object.keys(this.settings.social_services).length/n)*e+r,this.soc_frame.elem.width=0,this.soc_frame.elem.height=this.soc_frame.height,this.soc_frame.elem.style.minHeight=this.soc_frame.height+"px")},Ze.prototype.set_social=function(t){var e=this;this.session_uid=AMO_PIXEL_CLIENT.getSessionUid(),this.session_id=AMO_PIXEL_CLIENT.getShortSessionId(),t.locale=this.locale,t.button.id=this.id,t.button.hash=this.hash,t.session_uid=this.session_uid,t.session_id=this.session_id,t.metadata=AMO_PIXEL_CLIENT.makeMetadata(),t.link=AMO_PIXEL_CLIENT.getTrackingLink(),t.disable_titles=this.disable_titles,t.isMobile=this.isMobileDevice(),this.window.frames.social_iframe.postMessage({method:"set_social",payload:{data:t}},"*"),this.socialFrameReady=!0,this.keyactionsAwaited.forEach(function(t){return e.sendCRMReactions(t)}),this.keyactionsAwaited=[]},Ze.prototype.setVerticalBrandPos=function(t){var e=this.brand_holder,i=e.offsetWidth,n=t[1],o=t[0];if(e.style[o]="7px","bottom"===o)switch(n){case"left":e.style.left="-3px",e.className+=" amo-brand--bl";break;case"right":e.style.bottom="-10px",e.style.right="-"+(i+3)+"px",e.className+=" amo-brand--br"}else if("top"===o)switch(n){case"left":e.style.top="-10px",e.style.left="-"+(i+3)+"px",e.className+=" amo-brand--tl";break;case"right":e.style.right="-3px",e.className+=" amo-brand--tr"}},Ze.prototype.insertForms=function(t){var e=document.createElement("script"),i=this.createFormWrapper();window.amo_forms_params=t||{},e.id="amoforms_script",e.src=this.forms_host,i.appendChild(e),this.addClicksListener()},Ze.prototype.addClicksListener=function(){var e=this;window.addEventListener&&window.addEventListener("message",function(t){e.onMessage(t)})},Ze.prototype.onMessage=function(t){var e=this,i=t.data;try{i=JSON.parse(i)}catch(t){}switch(!0){case"click_button"===i:this.meta_params.inline?(e.livechat.hide(),document.querySelector(".amo-button--main").style.pointerEvents="none",this.window.frames.social_iframe.postMessage({method:"livechat:click"},"*")):document.getElementById("amobutton").click(),this.soc_frame.elem.style.zIndex=this.getZIndexForElement("socialIFrame");break;case"livechat:show"===i:if(e.livechat.show(),this.meta_params.inline){var n=document.querySelector(".amo-button--main");this.setBorderColor(n,"white"===this.settings.button.theme?this.getButtonColor():"#FFF"),this.setBackgroundColor(n,this.settings.button.theme),n.querySelector(".amo-button--close-icon").style.display="block",n.style.pointerEvents=""}this.isMobileDevice()&&(this.soc_frame.elem.style.zIndex="");break;case"livechat:hide"===i:if(e.livechat.hide(),this.meta_params.inline){var o=document.querySelector(".amo-button--main");this.setBorderColor(o,"transparent"),this.setBackgroundColor(o,"transparent"),o.querySelector(".amo-button--close-icon").style.display="",o.style.pointerEvents="none"}break;case"click_form"===i:e.showForm();break;case"pixel_ready"===i:e.initLivechat(),J=!0,Y.forEach(function(t){return K.apply(void 0,t)});break;case!("object"!=typeof i||!i.func||"buttonClick"!==i.func||!i.service):W("onButtonClick",i.service,i.link);break;case 1===this.getVersion()&&!("object"!=typeof i||!i.func||"resizeForm"!==i.func||!i.height):e.resizeFormFrame(i.height)}},Ze.prototype.resizeFormFrame=function(t){this.form_wrapper.style.height=t+"px",this.setFormPosition(t)},Ze.prototype.showForm=function(){var e=this,t="amo-form-wrapper_shown";this.form_wrapper.classList?this.form_wrapper.classList.add(t):this.form_wrapper.className+=" "+t,e.is_form_shown=!0,window.addEventListener&&document.addEventListener("click",function(t){e.hideForm(t)})},Ze.prototype.hideForm=function(){var t="amo-form-wrapper_shown";this.form_wrapper.classList?this.form_wrapper.classList.remove(t):this.form_wrapper.className=this.form_wrapper.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "),this.is_form_shown&&(this.is_form_shown=!1)},Ze.prototype.getFormData=function(){var t,e=this.settings.social_services,i={};for(t in e)if("form"===e[t].type){i={id:e[t].id,hash:e[t].link,locale:this.locale,type:"gso"};break}return i},Ze.prototype.createFormWrapper=function(){var t=document.createElement("div"),e="306px",i="500px";return t.style.width=e,t.style.height=i,t.className="amo-form-wrapper",this.form_wrapper=t,this.button_holder.appendChild(t),t},Ze.prototype.setFormPosition=function(t){var e=this,i=e.settings.button.button_position.split("-");2===e.orientation?(e.form_wrapper.style[i[1]]=e.soc_frame.width+10+"px",e.form_wrapper.style[i[0]]=0):1===e.orientation&&(e.form_wrapper.style[i[0]]=e.soc_frame.height+10+"px",e.form_wrapper.style[i[1]]=0)},Ze.prototype.initModal=function(t){this.modal=new Ke({container:t.holder,host:this.server_host})},Ze.prototype.initFormModal=function(t){this.form_modal=new fe({amoforms_url:this.forms_host,button_holder:t.holder})},Ze.prototype.initKeyActions=function(e){var i=this;void 0===e&&(e={}),this.keyactions=new qe({keyactions:this.settings.keyactions,sendCRMReactions:function(t){return i.sendCRMReactions(t)},showForm:function(t,e){return i.form_modal.show({id:t,hash:e})},showGreeting:function(){i.livechat?i.livechat.showGreeting():i.greetingAwaited=!0},showAnimation:function(t){i.collapsed&&(i.hideAnimation(e.button),i.displayAnimation({animation:t,button:e.button}),setTimeout(function(){i.hideAnimation(e.button),i.displayAnimation({animation:i.getAnimation(),button:e.button})},2e3))}})},Ze.prototype.sendCRMReactions=function(t){this.socialFrameReady?this.window.frames.social_iframe.postMessage({method:"send_keyaction",payload:{keyaction_id:t}},"*"):this.keyactionsAwaited.push(t)},Ze.prototype.initLivechat=function(){var t,e,i=this,n=this;if(!this.livechat&&3===this.getVersion()){var o=document.getElementById("amobutton");for(e in t={},this.settings.social_services){var s=this.settings.social_services[e];"livechat"===s.type&&(t=s)}this.livechat=new Re({config:this.user_config.onlinechat||{},host:this.server_host,socket_url:t.link,session_uid:this.session_uid,session_id:this.session_id,container:o,enabled:t.id,account_name:t.account_name,position:this.makePositionParams(),orientation:2===parseInt(this.settings.button.orientation)?"vertical":"horizontal",button:{id:this.settings.button.id,hash:this.settings.button.hash,color:this.getButtonColor()},locale:this.lang_id,greeting:this.settings.greeting,greeting_bot_params:this.bot_params,has_keyactions:0<Object.keys(this.settings.keyactions).length,has_greeting_reaction:0<Object.keys(this.settings.keyactions).filter(function(e){return i.settings.keyactions[e].reactions&&0<Object.keys(i.settings.keyactions[e].reactions).filter(function(t){return"amobutton_greeting"===i.settings.keyactions[e].reactions[t].action}).length}).length,modal:this.modal,forceButtonCollapse:!this.meta_params.inline&&this.forceButtonCollapse,isButtonOpened:function(){return!n.collapsed},isInline:this.meta_params.inline,servicesCount:this.services_count,serviceSize:this.settings.button.size-10,onIframeLoaded:function(){n.meta_params.inline&&1<this.services_count?o.click():o.style.opacity="1"}.bind(this)}),this.greetingAwaited&&this.livechat.showGreeting()}},new Ze(amo_social_button=amo_social_button||{})}();
